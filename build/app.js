!function(){"use strict";function makeThumbnail(imageObj,position){var container=document.createElement("li");container.className="gallery__thumbnail";var image=document.createElement("img");return image.src=imageObj.url_q,image.dataset.position=position.toString(),container.appendChild(image),container}function attachThumbnails(imagesCollection){imagesCollection.forEach(function(imageObj,i){var thumb=makeThumbnail(imageObj,i);document.getElementById("gallery").appendChild(thumb)})}function loadLightbox(imagePosition){var body=document.getElementsByTagName("body")[0];body.style.overflow="hidden",updateLightboxPhoto(images[imagePosition]),currentPosition=Number(imagePosition);var lightbox=document.getElementById("lightbox");lightbox.style.display="block",document.addEventListener("keydown",keydownListener,!1)}function closeLightbox(){var lightbox=document.getElementById("lightbox");lightbox.style.display="none";var body=document.getElementsByTagName("body")[0];body.style.overflow="auto",currentPosition=0,document.removeEventListener("keydown",keydownListener,!1)}function updateLightboxPhoto(imageObj){var image=document.getElementById("image");image.style.display="none";var imageCaption=document.getElementById("caption");imageCaption.style.display="none";var loadingAnimation=document.getElementById("lightspinner");loadingAnimation.style.display="block",image.src=imageObj.url_c?imageObj.url_c:imageObj.url_m,image.alt=imageObj.title,imageCaption.innerHTML='"'+imageObj.title+'" by <a href="https://www.flickr.com/photos/'+imageObj.owner+'">'+imageObj.ownername+"</a>"}function toggleImages(e){e.target.blur(),37===e.keyCode||"prev"===e.target.id?(incrementCounter(!1),updateLightboxPhoto(images[currentPosition])):(39===e.keyCode||"next"===e.target.id)&&(incrementCounter(!0),updateLightboxPhoto(images[currentPosition]))}function incrementCounter(increase){currentPosition===images.length-1&&increase?currentPosition=0:0!==currentPosition||increase?increase?currentPosition++:currentPosition--:currentPosition=images.length-1}function keydownListener(e){e.stopPropagation(),27===e.keyCode?closeLightbox():(37===e.keyCode||39===e.keyCode)&&toggleImages(e)}var images,currentPosition,apiKey="aec6f380f4286b7eb92b912e38445e48",galleryId="72157663691204050",extras="owner_name,url_q,url_c,url_m",format="json",flickrUrl="https://api.flickr.com/services/rest/?method=flickr.galleries.getPhotos".concat("&api_key=",apiKey).concat("&gallery_id=",galleryId).concat("&extras=",extras).concat("&format=",format).concat("&nojsoncallback=1"),flickrRequest=new XMLHttpRequest;flickrRequest.onreadystatechange=function(){4===flickrRequest.readyState&&200===flickrRequest.status&&(document.getElementById("darkspinner").style.display="none",images=JSON.parse(flickrRequest.responseText).photos.photo,attachThumbnails(images))},flickrRequest.open("GET",flickrUrl,!0),flickrRequest.send(),document.addEventListener("DOMContentLoaded",function(){document.getElementById("gallery").addEventListener("click",function(e){"gallery"!==e.target.id&&loadLightbox(e.target.dataset.position,images)}),document.getElementById("close").addEventListener("click",closeLightbox,!1),document.getElementById("next").addEventListener("click",toggleImages,!1),document.getElementById("prev").addEventListener("click",toggleImages,!1),document.getElementById("image").addEventListener("load",function(){document.getElementById("lightspinner").style.display="none",document.getElementById("image").style.display="block",document.getElementById("caption").style.display="block"})})}();